<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Imposter — Standalone</title>
    <style>
        body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding: 1rem; }
        label, input, button { font-size: 1rem; }
        #hiddenText { display: none; margin-top: 1em; font-weight: bold; }
        .meta { color: #666; font-size: .9rem; margin-top: .5rem }
    </style>
</head>
<body>
    <h2>Imposter — Standalone (client-only)</h2>
    <div>
        <label for="numPlayers">Players:</label>
        <input type="number" id="numPlayers" value="5" min="3" max="20" name="numberOfPlayers">
        <button id="newGameBtn">New Game</button>
        <button id="showNameBtn">Show Name</button>
    </div>

    <div id="hiddenText"></div>
    <div class="meta">This is a single static file — suitable for GitHub Pages. No server required.</div>

    <script>
    // Names list copied from the original Python file
    const namesList = [
        "Mr. Albornoz","Ms. Andrews","Mr. Baier","Mr. Barker","Ms. Biron",
        "Mrs. Blackburn","Mr. Bridges","Mr. Brown","Mr. Burns","Mr. Bahamon",
        "Dr. Barbera","Mr. Chiapetta","Mr. Cohen","Dr. Conderacci","Mr. Cucuzzella",
        "Mr. DelGaudio","Dr. Donovan","Ms. Elmore","Dr. Fastuca","Ms. Field",
        "Mr. Flanigan","Mr. Fusco","Ms. Guiglio Bonilla","Ms. Hart","Mr. Hattrup",
        "Mr. Hoehler","Dr. Hufford","Ms. Jefferson","Mr. Jung","Mr. Knapp",
        "Ms. La Canfora","Mr. Lehr","Ms. Love","Mr. Medina","Mrs. Noyola-Gonzalez",
        "Mr. O'Dwyer","Mr. Paniccia","Ms. Pearson","Mrs. Philipp","Mr. Pierce",
        "Mrs. Pipkin","Mr. Poppiti","Mr. Prieto-Alonso","Mr. Pyzik","Ms. Reed",
        "Mrs. Roberts","Mrs. Smith","Ms. Stone","Mrs. Tisdale","Mr. Trzcinski",
        "Mr. Vella-Camilleri","Mrs. Volpe","Ms. Wallace","Ms. Warfield","Mr. Weber",
        "Mrs. Wise","Mrs. Yancisin"
    ];

    // client-side game state
    let totalPlayers = 0;
    let imposterIndex = null;
    let sharedName = null;
    let currentIndex = 0;

    const showBtn = document.getElementById('showNameBtn');
    const hiddenTextDiv = document.getElementById('hiddenText');

    function startGame(n) {
        n = Math.max(3, Math.min(parseInt(n) || 5, namesList.length));
        totalPlayers = n;
        imposterIndex = Math.floor(Math.random() * n);
        sharedName = namesList[Math.floor(Math.random() * namesList.length)];
        currentIndex = 0;
    }

    function showMessage(text) {
        hiddenTextDiv.textContent = text;
        hiddenTextDiv.style.display = 'block';
    }

    function clearMessage() {
        hiddenTextDiv.textContent = '';
        hiddenTextDiv.style.display = 'none';
    }

    document.getElementById('newGameBtn').addEventListener('click', ()=>{
        const n = document.getElementById('numPlayers').value;
        startGame(n);
        showMessage('New game: ' + totalPlayers + ' players');
        showBtn.textContent = 'Show Name';
        // clear the new-game message after a short delay so the UI is clean
        setTimeout(()=>{ clearMessage(); }, 1200);
    });

    document.getElementById('showNameBtn').addEventListener('click', ()=>{
        // If a name is currently visible, hide it and don't advance
        if (hiddenTextDiv.style.display !== 'none' && hiddenTextDiv.textContent.trim() !== '') {
            clearMessage();
            showBtn.textContent = 'Show Name';
            return;
        }

        if (totalPlayers === 0) {
            // no game initialized — start one with the input value
            startGame(document.getElementById('numPlayers').value);
            // small UX hint
            showMessage('New game: ' + totalPlayers + ' players');
            setTimeout(()=>{ clearMessage(); }, 800);
            return;
        }

        // Determine what this player sees locally (advance currentIndex afterwards)
        const name = (currentIndex === imposterIndex) ? 'Imposter' : sharedName;
        const playerNum = currentIndex + 1; // show 1-based
        showMessage(`Player ${playerNum} — ${name}`);
        showBtn.textContent = 'Hide';
        currentIndex = (currentIndex + 1) % totalPlayers;
    });

    // initialize button label
    showBtn.textContent = 'Show Name';
    </script>
</body>
</html>
